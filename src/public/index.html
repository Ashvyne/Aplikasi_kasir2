<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aplikasi Kasir</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2>ðŸ’³ KASIR</h2>
      </div>
      <nav class="nav-menu" id="navMenu">
        <a href="#pos" class="nav-item active" data-page="pos">
          <span class="icon">ðŸ›’</span>
          <span class="text">POS</span>
        </a>
        <a href="#products" class="nav-item" data-page="products">
          <span class="icon">ðŸ“¦</span>
          <span class="text">Produk</span>
        </a>
        <a href="#transactions" class="nav-item" data-page="transactions">
          <span class="icon">ðŸ“‹</span>
          <span class="text">Transaksi</span>
        </a>
        <a href="#reports" class="nav-item" data-page="reports">
          <span class="icon">ðŸ“Š</span>
          <span class="text">Laporan</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header">
        <h1 id="pageTitle">ðŸ›’ Point of Sale</h1>
        <div class="header-info">
          <span id="currentTime"></span>
          <span class="user">ðŸ‘¤ <span id="userDisplay">User</span></span>
          <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
      </header>

      <!-- Pages -->
      <div class="pages-container">
        
        <!-- POS Page -->
        <div id="pos-page" class="page active">
          <div class="page-header">
            <h2>ðŸ›’ Point of Sale</h2>
          </div>
          <div class="pos-layout">
            <div class="products-section">
              <div class="search-bar">
                <input type="text" id="searchProduct" placeholder="ðŸ” Cari..." onkeyup="searchProducts()">
              </div>
              <div id="productsGrid" class="products-grid"></div>
            </div>
            <div class="cart-section">
              <h3>ðŸ›’ Keranjang</h3>
              <div id="cartItems" class="cart-items"></div>
              <div class="cart-summary">
                <div class="summary-row"><span>Subtotal:</span><span id="subtotal">Rp 0</span></div>
                <div class="summary-row"><span>Diskon:</span><input type="number" id="discount" value="0" onchange="updateTotal()" style="width: 100px;"></div>
                <div class="summary-row total"><span>Total:</span><span id="total">Rp 0</span></div>
                <div style="border-top: 1px solid #ddd; padding-top: 10px; margin-top: 10px;">
                  <div class="summary-row"><span>Metode:</span><select id="paymentMethod"><option>Tunai</option><option>Kartu</option></select></div>
                  <div class="summary-row"><span>Diterima:</span><input type="number" id="cashReceived" placeholder="0" onchange="calculateChange()" style="width: 80px;"></div>
                  <div class="summary-row" style="background: #f0f0f0; padding: 8px; margin-top: 8px;">
                    <span style="color: green; font-weight: bold;">Kembalian:</span>
                    <span id="changeAmount" style="color: green; font-weight: bold;">Rp 0</span>
                  </div>
                </div>
              </div>
              <button class="btn btn-success" onclick="checkoutTransaction()" style="width: 100%; margin-top: 10px;">âœ“ Checkout</button>
              <button class="btn btn-secondary" onclick="clearCart()" style="width: 100%; margin-top: 5px;">âœ• Batal</button>
            </div>
          </div>
        </div>

        <!-- Products Page -->
        <div id="products-page" class="page">
          <div class="page-header">
            <h2>ðŸ“¦ Manajemen Produk</h2>
            <button class="btn btn-primary" onclick="openProductModal()">+ Tambah</button>
          </div>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr><th>No</th><th>Nama</th><th>SKU</th><th>Kategori</th><th>Harga</th><th>Stok</th><th>Aksi</th></tr>
              </thead>
              <tbody id="productsTableBody"></tbody>
            </table>
          </div>
        </div>

        <!-- Transactions Page -->
        <div id="transactions-page" class="page">
          <div class="page-header">
            <h2>ðŸ“‹ Riwayat Transaksi</h2>
            <button class="btn btn-primary" onclick="exportSalesExcel()">ðŸ“¥ Export</button>
          </div>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr><th>Invoice</th><th>Tanggal</th><th>Total</th><th>Metode</th><th>Aksi</th></tr>
              </thead>
              <tbody id="transactionsTableBody"></tbody>
            </table>
          </div>
        </div>

        <!-- Reports Page -->
        <div id="reports-page" class="page">
          <div class="page-header">
            <h2>ðŸ“Š Laporan</h2>
            <button class="btn btn-primary" onclick="exportProductsExcel()">ðŸ“¦ Export</button>
          </div>
          <div class="analytics-grid">
            <div class="analytics-card">
              <h3>Hari Ini</h3>
              <div class="analytics-value" id="todayTransactions">0</div>
              <p class="analytics-label">Transaksi</p>
            </div>
            <div class="analytics-card">
              <h3>Pendapatan</h3>
              <div class="analytics-value" id="todayRevenue">Rp 0</div>
            </div>
            <div class="analytics-card">
              <h3>Minggu Ini</h3>
              <div class="analytics-value" id="weekTransactions">0</div>
              <p class="analytics-label">Transaksi</p>
            </div>
            <div class="analytics-card">
              <h3>Stok Habis</h3>
              <div class="analytics-value" id="lowStockCount">0</div>
            </div>
          </div>
          <h3 style="margin-top: 30px;">Produk Terlaris</h3>
          <div class="table-container">
            <table class="table">
              <thead>
                <tr><th>Rank</th><th>Produk</th><th>Terjual</th><th>Pendapatan</th></tr>
              </thead>
              <tbody id="topProductsBody"></tbody>
            </table>
          </div>
        </div>

      </div>
    </main>
  </div>

  <!-- Modal -->
  <div id="productModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Tambah Produk</h2>
        <button class="close-btn" onclick="closeProductModal()">&times;</button>
      </div>
      <form onsubmit="saveProduct(event)">
        <div class="form-group">
          <label>Nama</label>
          <input type="text" id="productName" required>
        </div>
        <div class="form-group">
          <label>SKU</label>
          <input type="text" id="productSku" required>
        </div>
        <div class="form-group">
          <label>Kategori</label>
          <select id="productCategory"><option value="1">Makanan</option><option value="2">Minuman</option><option value="3">Snack</option></select>
        </div>
        <div class="form-group">
          <label>Harga</label>
          <input type="number" id="productPrice" required>
        </div>
        <div class="form-group">
          <label>Stok</label>
          <input type="number" id="productStock" required>
        </div>
        <button type="submit" class="btn btn-success">Simpan</button>
      </form>
    </div>
  </div>

  <script src="js/debug.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
